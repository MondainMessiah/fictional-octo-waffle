tibia-daily-discord-bot/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ daily.yml
â”œâ”€â”€ main.py
â””â”€â”€ requirements.txt

import asyncio
from playwright.async_api import async_playwright
import datetime
import requests
from bs4 import BeautifulSoup

WEBHOOK_URL = "https://discord.com/api/webhooks/1383144010184392796/IblanYAMyM-2EuY_7bvuEkKFdFl4jBtrJwZCztH4U8_630r0WgsrcxgXPwCR_PC9P3fy"
TIBIA_URL = "https://tibia.fandom.com/wiki/Daily_Status"

async def fetch_tibia_status():
    async with async_playwright() as p:
        browser = await p.chromium.launch()
        page = await browser.new_page()
        await page.goto(TIBIA_URL)
        await page.wait_for_selector("table.wikitable")
        content = await page.content()
        await browser.close()
        return content

def extract_status_table(html):
    soup = BeautifulSoup(html, "html.parser")
    table = soup.find("table", class_="wikitable")
    if not table:
        return "âš ï¸ Could not find the status table."

    rows = table.find_all("tr")
    message = f"**Tibia Daily Status â€“ {datetime.datetime.now().strftime('%Y-%m-%d')}**\n\n"

    for row in rows[1:]:
        cols = row.find_all("td")
        if len(cols) >= 2:
            event = cols[0].get_text(strip=True)
            status = cols[1].get_text(strip=True)
            message += f"ðŸ”¹ **{event}**: {status}\n"
    return message.strip()

async def main():
    html = await fetch_tibia_status()
    message = extract_status_table(html)
    res = requests.post(WEBHOOK_URL, json={"content": message})
    if res.status_code not in [200, 204]:
        raise Exception(f"Failed to post to Discord: {res.status_code} â€“ {res.text}")
    print("âœ… Sent message to Discord.")

if __name__ == "__main__":
    asyncio.run(main())

playwright
beautifulsoup4
requests

name: Tibia Daily Bot

on:
  schedule:
    - cron: '5 8 * * *'  # runs at 08:05 UTC = 09:05 BST
  workflow_dispatch:     # allows manual run

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: 3.11

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        playwright install --with-deps

    - name: Run bot
      run: python main.py
git add .
git commit -m "Add Tibia daily status Discord bot"
git push
